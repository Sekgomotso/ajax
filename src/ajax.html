<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewpoint" content="width=device-width, intitial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="ajax.css">

    <title> Visitor form </title>
</head>
<body>

    <h1 class="heading"> Visitor's form </h1>

    <form action="new_visit" method="POST" id="forms">

        <input type="text" name="visitor_name" placeholder="Visitor name" id="body">
        <br><br>
        <input type="text" name="assistant" placeholder="Assistant" id="body">
        <br><br>
        <input type="text" name="visitors_age" placeholder="Visitor's age" id="body">
        <br><br>
        <input type="text" name="date_of_visit" placeholder="Date of visit" id="body">
        <br><br>
        <input type="text" name="time_of_visit" placeholder="Time of visit" id="body">
        <br><br>
        <input type="text" placeholder="Comments" id="body">
        <br><br>
        <input type="submit" value="Submit">

    </form>

    <br><br>

    <table id="visitors" width = 700px border ="1">

        <h1>Visitor table</h1>

        <tr>

            <th> Id </th>
            <th> Name </th>
            <th> Age </th>
            <th> Date </th>
            <th> Time </th>
            <th> Assistant </th>
            <th> Comments </th>

        </tr>

    </table>

    <br><br>

    <button> Delete </button>

    <script>
        //add event listener
        document.getElementById("form").addEventListener("submit", addNewVisitor);

        const addNewVisitor = async () => {

            let forms = document.getElementById("forms");
            let body = document.getElementById("body");

            try{

                // submit button
                let visit = await fetch ("/", {
                method:"POST",
                headers:{
                    "Content-type":"application/json"
                },

                // change a json file to a string
                body: JSON.stringify({forms: forms, body:body})
            })
        } catch (err) {
            console.log(err)
        }
    } 

    </script>

</body>
    
</html>